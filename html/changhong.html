<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>长虹</title>
    <link href="../css/reset.css" type="text/css" rel="stylesheet" />
    <link href="../css/changhong.css" type="text/css" rel="stylesheet" />
</head>

<body>

    <!-- 页首 -->
    <header>
        <!-- 头部横幅图片 -->
        <div class="top-banner">
            <a href="http://group.changhong.com/">
                <img src="../img/top_banner.jpg" alt="长虹">
            </a>
        </div>
        <!-- 头部一级导航 -->
        <div class="top-nav">
            <!-- 盒子居中 -->
            <div class="auto">
                <!-- 左边盒子 -->
                <ul class="left">
                    <li style="background: gray"><a>长虹官网</a></li>
                    <li><a>关于长虹</a></li>
                    <li><a>关于合作</a></li>
                    <li style="margin-right: 100px"><a>English</a></li>
                </ul>
                <!-- 右边盒子 -->
                <ul class="rigth">
                    <li class="red"><a>登录</a><i style="padding: 0 16px;color: beige;">|</i><a>注册</a></li>
                    <li style="position: relative;"><a>我的长虹</a>
                        <!-- 头部二级导航 -->
                        <div class="top-subnav">
                            <!-- 下拉菜单 -->
                            <div class="top">
                                <img src="../img/0.jpg" alt="">
                                <p class="da"><a href="">您好请登录</a></p>
                                <p class="xiao"><a href="">账户设置</a></p>
                                <div class="top-1">
                                    <ul class="top-1-auto">
                                        <li><a href="">我的订单</a><i>|</i><a href="">我的预约</a></li>
                                        <li><a href="">家电管家</a><i>|</i><a href="">服务记录</a></li>
                                        <li><a href=""> 我的积分</a><i>|</i></li>
                                        <li><a href="">我的收藏</a><i>|</i></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </li>
                    <!-- 鼠标悬停二维码 -->
                    <li class="er"><a>虹创有品</a>
                        <div class="erwei">
                            <img src="../img/er.jpg" alt="">
                        </div>
                    </li>
                    <li><a>购物车</a></li>
                </ul>
            </div>
        </div>

        <!-- 头部页底 -->
        <div class="botton-auto">
            <div class="botton-auto_1">
                <img src="../img/ZXC.png" alt="">
            </div>
            <div class="top-subnav1">
                <ul class="subnav1_ul">
                    <li class="active subnav-li" style="color: red">首页</li>

                    <li style="position: inherit;" class="subnav-li">
                        <a href="">电视</a>
                        <ul class="subnav-li-ul">
                            <li>热门推荐</li>
                            <li>
                                <img src="../img/35.jpg" alt="">
                                <p>65英寸OLED电视</p>
                                <em>￥45678.00</em>
                            </li>
                            <li><img src="../img/35.jpg" alt="">
                                <p>65英寸OLED电视</p>
                                <em>￥45678.00</em>
                            </li>
                            <li><img src="../img/35.jpg" alt="">
                                <p>65英寸OLED电视</p>
                                <em>￥45678.00</em>
                            </li>
                            <li><img src="../img/35.jpg" alt="">
                                <p>65英寸OLED电视</p>
                                <em>￥45678.00</em>
                            </li>
                        </ul>
                    </li>
                    <li class="subnav-li">空调
                        <ul class="subnav-li-ul">
                            <li>热门推荐</li>
                            <li>
                                <img src="../img/35.jpg" alt="">
                                <p>65英寸OLED电视</p>
                                <em>￥45678.00</em>
                            </li>
                            <li><img src="../img/35.jpg" alt="">
                                <p>65英寸OLED电视</p>
                                <em>￥45678.00</em>
                            </li>
                            <li><img src="../img/35.jpg" alt="">
                                <p>65英寸OLED电视</p>
                                <em>￥45678.00</em>
                            </li>
                            <li><img src="../img/35.jpg" alt="">
                                <p>65英寸OLED电视</p>
                                <em>￥45678.00</em>
                            </li>
                        </ul>
                    </li>
                    <li class="subnav-li">冰洗

                    </li>
                    <li class="subnav-li">生活家电

                    </li>
                    <li class="subnav-li">显示器

                    </li>
                    <li class="subnav-li">服务

                    </li>
                </ul>
            </div>
            <div class="botton-auto_3">
                <input id="changhong_input" type="text">
            </div>
        </div>

    </header>
    <!--########## 轮播图 #########-->
    <div class="banner">
        <ul>
            <li>
                <a href="#"><img src="../img/962.jpg" /></a>
            </li>
            <li>
                <a href="#"><img src="../img/164.jpg" /></a>
            </li>
            <li>
                <a href="#"><img src="../img/246.jpg" /></a>
            </li>
        </ul>
        <ol>
            <li class="active"></li>
            <li></li>
            <li></li>
        </ol>
        <!-- 轮播图上的二级导航 -->
        <div class="bg-nav">
            <ul class="bg-nav-auto">
                <li>
                    <img src="../img/b01.png" alt="">
                    <a href="">启客系列</a>
                    <div class="bg-subnav">
                        <div class="bg-subnav-auto">
                            <div><a href="">CHiQ电视</a></div>
                            <div>
                                <a href="">Q5R</a>
                                <a href="">Q5K</a>
                                <a href="">Q5N</a>
                                <a href="">Q5T</a>
                                <a href="">Q5A</a>
                                <a href="">Q3T</a>
                                <a href="">Q6K</a>
                                <a href="">Q6N</a>
                                <a href="">Q6A</a>
                            </div>
                            <div>
                                <a href="">CHiQ空调</a>
                            </div>
                            <div>
                                <a href="">立柜式</a>
                                <a href="">壁挂式</a>
                            </div>
                            <div>
                                <a href="">CHiQ冰箱</a>
                            </div>
                            <div>
                                <a href=""> 对开门</a>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <img src="../img/b02.png" alt="">
                    <a href="">平板电视</a>
                </li>
                <li>
                    <img src="../img/b03.png" alt="">
                    <a href="">空调产品</a>
                </li>
                <li>
                    <a href="">冰洗产品</a>
                </li>
                <li>
                    <a href="">生活家电</a>
                </li>
                <li>
                    <a href="">数码影音</a>
                </li>
                <li>
                    <a href="">智慧家庭</a>
                </li>
            </ul>
        </div>
    </div>
    <!--左侧楼梯-->
    <div id="loutinav">
        <ul>
            <li class="active"><span>热门</span> </li>
            <li><span>电视</span> </li>
            <li><span>空调</span> </li>
            <li><span>冰洗</span> </li>
            <li><span>生活</span> </li>
            <li><span>周边</span> </li>
        </ul>
    </div>
    <!--楼层内容开始-->
    <div id="main">
        <div class="louti" style="background: #cc0033;">热门产品</div>
        <div class="floor-title">
            <div class="floor-title-lt">
                <span style="font-size: 20px; border-left: 4px solid #ca694e;">电视产品</span>
                <a href="">查看更多 ></a>
            </div>
            <div class="floor-title-rf">
                <ul>
                    <li>
                        <a href="">CHiQ电视</a>
                    </li>
                    <li>
                        <a href="">激光电视</a>
                    </li>
                    <li>
                        <a href="">4K超高清电视</a>
                    </li>
                    <li>
                        <a href="">HDR电视</a>
                    </li>
                    <li>
                        <a href="">智能语音电视</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="louti" style="background: #6666cc;">
            <ul class="left">
            </ul>
            <ul class="right">

            </ul>
        </div>
        <div class="floor-title">
            <div class="floor-title-lt">
                <span style="font-size: 20px; border-left: 4px solid#759dfc">空调产品</span>
                <a href="">查看更多 ></a>
            </div>
            <div class="floor-title-rf">
                <ul>
                    <li>
                        <a href="">CHiQ空调</a>
                    </li>
                    <li>
                        <a href="">壁挂式</a>
                    </li>
                    <li>
                        <a href="">立柜式</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="louti" style="background: #999933;">
            空调产品
        </div>
        <div class="floor-title">
            <div class="floor-title-lt">
                <span style="font-size: 20px; border-left: 4px solid #ff9c00">冰洗产品</span>
                <a href="">查看更多 ></a>
            </div>
            <div class="floor-title-rf">
                <ul>
                    <li>
                        <a href="">冰箱</a>
                    </li>
                    <li>
                        <a href="">洗衣机</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="louti" style="background: #ccff33;">
            冰洗产品
        </div>
        <div class="floor-title">
            <div class="floor-title-lt">
                <span style="font-size: 20px; border-left: 4px solid #c59ac7">生活家电</span>
                <a href="">查看更多 ></a>
            </div>
            <div class="floor-title-rf">
                <ul>
                    <li>
                        <a href="">生活电器</a>
                    </li>
                    <li>
                        <a href="">厨卫大电</a>
                    </li>
                    <li>
                        <a href="">厨卫小电</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="louti" style="background: #006633;">
            生活家电
        </div>
        <div class="floor-title">
            <div class="floor-title-lt">
                <span style="font-size: 20px; border-left: 4px solid #ff9c00">周边产品</span>
            </div>
        </div>
        <div class="louti" style="background: #6666cc;">
            周边产品
        </div>

    </div>
    <!-- 网页底部 -->
    <div class="footer">
        <!-- 居中 -->
        <div class="top-center">
            <!-- 页底第一个大盒子 -->
            <div class="footer-sh">
                <!-- 小div 1 -->
                <div class="footer-sh1">
                    <div>
                        <img src="../img/3.png" alt="">
                    </div>
                    <div>
                        <h1>物流快线</h1>
                        <p>及时响应准确送达</p>
                    </div>
                </div>
                <!-- 第二个小div居中 -->
                <div class="footer-auto">
                    <div>
                        <img src="../img/5.png" alt="">
                    </div>
                    <div>
                        <h1>无忧报修</h1>
                        <p>7*24小时客服热线</p>
                    </div>
                </div>
                <!-- 第三个小div -->
                <div class="footer-right">
                    <div>
                        <img src="../img/03.png" alt="">
                    </div>
                    <div>
                        <h1>售后网点</h1>
                        <p>20000余家售后网点</p>
                    </div>
                </div>
            </div>
            <!-- 页底第二大盒子 -->
            <div class="footer-bottom">
                <!-- 第一个小盒子 -->
                <div class="footer-bottom1">
                    <ul>
                        <li class="footer-title">品牌渠道</li>

                        <li><a href="https://changhongtv.tmall.com/" target="_blank">长虹天猫</a></li>

                        <li><a href="https://changhonggov.jd.com/" target="_blank">长虹京东</a></li>

                        <li><a href="http://shop.suning.com/30000009/index.html" target="_blank">长虹苏宁</a></li>

                        <li><a href="http://pinpai.gome.com.cn/SI_15/index.html" target="_blank">长虹国美</a></li>

                    </ul>
                    <ul>
                        <li class="footer-title">友情链接</li>

                        <li><a href="http://www.meiling.com/" target="_blank">MELING美菱</a></li>

                        <li><a href="http://www.zkmeiling.com/" target="_blank">中科美菱</a></li>

                        <li><a href="http://www.changhongtech.com/" target="_blank">日电科技</a></li>

                        <li><a href="http://mobile.changhong.com/" target="_blank">长虹手机</a></li>

                    </ul>
                    <ul>
                        <li class="footer-title">友情链接</li>

                        <li><a href="http://www.bangjiashi.com/" target="_blank">家事帮</a></li>

                        <li><a href="http://tv.qq.com/" target="_blank">腾讯视频•TV端</a></li>

                        <li><a href="http://cn.changhong.com/activity/xrzm.html" target="_blank">虹创有品</a></li>

                    </ul>
                    <ul>
                        <li class="footer-title">服务支持</li>

                        <li><a href="http://cn.changhong.com/fw/" target="_blank">产品查询</a></li>

                        <li><a href="http://cn.changhong.com/fw/cpbxfw/support.html" target="_blank">维修服务</a></li>

                        <li><a href="http://cn.changhong.com/fw/ybfw/support.html" target="_blank">延保服务</a></li>

                        <li><a href="http://cn.changhong.com/fw/gdfw/xzzx/" target="_blank">下载中心</a></li>

                    </ul>
                </div>

                <!-- 第二个小盒子 -->

                <div class="footer-bottom2">
                    <ul class="lf">
                        <li class="help-title">长虹集团</li>

                        <li><a href="http://group.changhong.com/xwzx_255/gsdt/" target="_blank">公司动态</a></li>

                        <li><a href="http://group.changhong.com/tzzgx_275/" target="_blank">投资者关系</a></li>

                    </ul>
                    <ul class="rt">
                        <li class="help-title">商务合作</li>

                        <li><a href="http://b2b.changhong.com/" target="_blank">经销商登录</a></li>

                        <li><a href="http://srm.changhong.com/srm/login/index.do" target="_blank">供应商登录</a></li>

                        <li><a href="http://jsfw.kydls.com/" target="_blank">服务商登录</a></li>

                    </ul>
                    <div class="clearfix"></div>
                    <div class="foot-shopping">
                        <p class="lf"><a href="https://jf.changhong.com/" target="_blank">积分商城</a></p>
                        <p class="rt"><a href="http://cn.changhong.com/fw/gdfw/gwzn/" target="_blank">购物指南</a></p>
                    </div>
                </div>
                <!-- 第三个小盒子 -->
                <div class="footer-bottom3">

                    <li class="airlines"><img src="../img/12.png" alt=""><a style="cursor: pointer; color:#f12020;">在线客服</a></li>
                    <li class="feedback"><img src="../img/17.png" alt=""><a href="http://cn.changhong.com/gwsy/dblj/wtfk/" style="color:#f12020">问题反馈</a></li>
                    <h1 style="margin-top:26px;">4008-111-666</h1>
                    <h1>4006-111-666</h1>
                </div>
                <!-- 第四个小盒子 -->
                <div class="help-code">


                    <div class="help-code-lf">
                        <img src="../img/25.jpg" alt="官方特卖" width="108" height="108">
                        <p>官方特卖</p>
                    </div>


                    <div class="help-code-rt">
                        <img src="../img/85.jpg" alt="长虹服务" width="108" height="108">
                        <p>长虹服务</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../js/jquery.js"></script>
    <script>
        $('.subnav1_ul').on('click', 'li', function() {
            $('.subnav1_ul li').removeClass('active')
            $(this).addClass('active');


        })
        $('.subnav1_ul').on('mousemove', 'li', function() {
            console.log('鼠标上滑')


        })
    </script>
    <!-- 轮播图 -->
    <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        function changhong() {
            this.banner = $('.banner'); //获取div
            this.picul = $('.banner ul'); //获取div里的ul
            this.piclist = $('.banner ul li'); //ul里的li
            this.btns = $('.banner ol li'); //获取无序列表里的li
            this.num = 0;
            this.liwidth = this.piclist.eq(0).width(); //图片列表的宽
            this.timer = null; //定时器
        }

        changhong.prototype.init = function() { //初始化原型
            var that = this;
            var $firstpic = this.piclist.first().clone()
            var $lastpic = this.piclist.last().clone();
            this.picul.append($firstpic);
            this.picul.prepend($lastpic);
            //重新获取piclist的长度。
            this.piclist = $('.banner ul li');
            this.picul.width(this.liwidth * this.piclist.length).css('left', -this.liwidth);
            for (var i = 0; i < this.btns.length; i++) {
                this.btns[i].onclick = function() {
                    that.num = $(this).index();
                    that.tabchange();
                }
            }

            this.right.on('click', function() {
                that.num++;
                if (that.num == that.btns.length) {
                    that.btns.eq(0).addClass('active').siblings().removeClass('active');
                }
                that.tabchange();

            });
            this.left.on('click', function() {
                that.num--;
                that.tabchange();

            });
            this.autoplay();
        }

        changhong.prototype.tabchange = function() {
            var that = this;
            this.btns.eq(this.num).addClass('active').siblings().removeClass('active');
            this.picul.stop(true, true).animate({
                left: -this.liwidth * (this.num + 1)
            }, 200, function() {
                if (parseInt(that.picul.css('left')) == -that.liwidth * (that.btns.length + 1)) {
                    that.picul.css('left', -that.liwidth + 'px');
                    that.num = 0;
                }
                if (parseInt(that.picul.css('left')) == 0) {
                    that.picul.css('left', -that.liwidth * that.btns.length + 'px');
                    that.num = that.btns.length - 1;
                }
            })
        }
        changhong.prototype.autoplay = function() {
            var that = this;
            that.timer = setInterval(function() {
                that.right.click();
            }, 2000)
        }
        new changhong().init();
    </script>
    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        $(function() {
            //1.控制楼梯的显示与隐藏
            var $louti = $('#loutinav'); //楼梯
            var $loutili = $('#loutinav ul li'); //楼梯子元素li
            var $louceng = $('#main .louti'); //楼层
            $(window).on('scroll', function() {
                //scrollTop():获取匹配元素相对滚动条顶部的偏移
                var $st = $(window).scrollTop();
                if ($st >= 900) {
                    $louti.show();
                } else {
                    $louti.hide();
                }

                //4.拖拽滚轮，左侧对应的楼梯添加active
                //获取楼层每一个的top值
                //each(): 类似于for，遍历  ,终止循环 --return false  
                $louceng.each(function(index, element) { //index:元素的索引，element:当前的元素   
                    var $top1 = $louceng.eq(index).offset().top + 400;
                    if ($top1 > $st) { //如果盒子的top值大于滚动条的top值，添加active.
                        $loutili.removeClass('active');
                        $loutili.eq(index).addClass('active');
                        return false;
                    }
                    //return false;//终止循环
                });

            });

            //2.给左侧的楼梯添加点击事件，进行位置的跳转
            //offset():盒子的偏移值，返回一个对象，包含left/top
            $loutili.not('.last').on('click', function() {
                var $top = $louceng.eq($(this).index()).offset().top; //当前楼梯li项对应的楼层的top值。
                $('html,body').animate({
                    scrollTop: $top
                })
            });
        });
    </script>
    <script>
        //1.渲染列表
        const oUl = document.querySelector('.louti ul');
        let ajax = new XMLHttpRequest(); //创建ajax对象。   
        ajax.open('get', 'http://localhost/changhong/css/php/changhonglist.php',
            true); //参1：请求方式post/get   参2：接口地址    参3：是否异步。true异步 
        ajax.send(); //发送解析(5个步骤(就绪状态码0-4))   0:初始化   4:完成
        //就绪状态码：readyState
        ajax.onreadystatechange = function() { //监听就绪状态码是否已经完成。
            if (ajax.readyState === 4) { // 4:完成 获取接口数据(responseText)
                console.log(JSON.parse(ajax.responseText));
                //console.log(JSON.parse({a:1}));
                //下面的错误：JSON.parse里面的参数不是json格式。
                // Uncaught SyntaxError: Unexpected token o in JSON at position 1
                // at JSON.parse (<anonymous>)
                // at XMLHttpRequest.ajax.onreadystatechange (taobaolist.html:18)
                let dataarr = JSON.parse(ajax.responseText);
                let strhtml = '';
                for (let i = 0; i < dataarr.length; i++) {
                    strhtml += `
                        <a href="#">
                            <li>
                                <img src="${dataarr[i].url}"/>
                                <p>${dataarr[i].titile}</p>
                                <span>${dataarr[i].price}</span>
                                <span>${dataarr[i].sailnumber}</span>
                                <span sid=${dataarr[i].sid}>X</span>
                            </li>
                        </a>
                    `;
                }
                oUl.innerHTML = strhtml;
            }
        }


        //2.给span添加点击事件，删除整个li
        oUl.onclick = function(ev) {
            var ev = ev || window.event;
            let element = ev.target || ev.srcElement;
            //alert(element.innerHTML);
            if (element.nodeName === 'SPAN' && element.innerHTML === 'X') {
                if (window.confirm('你确定要删除吗?')) {
                    oUl.removeChild(element.parentNode.parentNode);
                    let ajax = new XMLHttpRequest();
                    let sid = element.getAttribute('sid');
                    ajax.open('get', 'http://localhost/changhong/css/php/del.php?id=' + sid, true);
                    ajax.send();
                    ajax.onreadystatechange = function() {

                    }
                }
            }
        }
    </script>
</body>

</html>